!function(t){t.fn.searchParams=function(o){return e.methods[o]?e.methods[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void t.error("jQuery.searchParams: Method `"+o+"` is undefined"):e.methods.init.apply(this,arguments)};let e={methods:{init:function(e){let s=t.extend({plusDirection:"top",selectOptions:[],customRowType:[]},e);0!==s.selectOptions.length?"top"===s.plusDirection||"bottom"===s.plusDirection?(o.var.globalCtx=this,o.var.globalSettings=e,o.methods.initRowsMap(),this.append('<div class="col-lg-12" type="sp_wrapper"></div>'),o.methods.addRow(this,s.selectOptions)):t.error('jQuery.searchParams: options.plusDirection can be only "top" or "bottom"'):t.error("jQuery.searchParams: options.selectOptions required")},rowsCount:function(){return o.var.rowsCount},jsonMarshal:function(){},jsonUnmarshal:function(){}}},o={methods:{addRow:function(){o.methods.removePlus();let e=t(o.const.rowBaseTmpl);o.methods.addSelect(e),o.methods.addValue(e),o.methods.addCross(e),o.var.globalCtx.find('[type="sp_wrapper"]').append(e),o.var.rowsCount++,o.methods.addPlus()},addSelect:function(t){t.find('[type="sp_select"]').append(o.methods.getSelect(t))},addValue:function(t){t.find('[type="sp_value"]').append(o.var.rowsTypeMap.get(t.find('[type="sp_select"]').find("select option:selected").attr("s_type")))},changeValue:function(e,s){e.find('[type="sp_value"]').html(o.var.rowsTypeMap.get(t(s[0].options[s[0].options.selectedIndex]).attr("s_type")))},addPlus:function(){let e=t('<button class="btn btn-outline-success btn-block"><i class="fa fa-plus" aria-hidden="true"></i></button>');e.on("click",function(){o.methods.addRow()}),"top"===o.var.globalSettings.plusDirection?t(o.var.globalCtx.find(".row")[0]).find('[type="sp_plus"]').append(e):o.var.globalCtx.find(".row").last().find('[type="sp_plus"]').append(e)},removePlus:function(){o.var.globalCtx.find('[type="sp_plus"]').find("button").remove()},addCross:function(e){let s=t('<button class="btn btn-outline-danger btn-block"><i class="fa fa-times" aria-hidden="true"></i></button>');s.on("click",function(){o.methods.removeRow(e)}),e.find('[type="sp_cross"]').append(s)},removeRow:function(t){t.remove(),o.var.rowsCount--,o.methods.isEmpty()?o.methods.addRow():(o.methods.removePlus(),o.methods.addPlus())},isEmpty:function(){return 0===o.var.rowsCount},getSelect:function(e){let s=t('<select class="form-control"></select>');for(let e=0;e<o.var.globalSettings.selectOptions.length;e++){let n=t("<option></option>");n.attr("name",o.var.globalSettings.selectOptions[e].name),n.attr("s_type",o.var.globalSettings.selectOptions[e].type),n.append(o.var.globalSettings.selectOptions[e].tittle),s.append(n)}for(let e=0;e<o.var.globalSettings.customRowType.length;e++){let n=t("<option></option>");n.attr("name",o.var.globalSettings.customRowType[e].name),n.attr("s_type",o.var.globalSettings.customRowType[e].type),n.append(o.var.globalSettings.customRowType[e].tittle),s.append(n)}return s.on("change",function(){o.methods.changeValue(e,t(this))}),s},initRowsMap:function(){o.var.rowsTypeMap=new Map,o.var.rowsTypeMap.set("text",'<input class="form-control" type="text">'),o.var.rowsTypeMap.set("color",'<input class="form-control" type="color">'),o.var.rowsTypeMap.set("number",'<input class="form-control" type="number">'),o.var.rowsTypeMap.set("date",'<input class="form-control" type="date">');let e=o.var.globalSettings.customRowType;if(void 0!==e&&0!==e.length)for(let s=0;s<e.length;s++)if(e[s].type.startsWith("select")){let n=t('<select class="form-control"></select>');t(e[s].params).each(function(o){let a=t("<option></option>");a.attr("name",e[s].params[o].value),a.append(e[s].params[o].tittle),n.append(a)}),o.var.rowsTypeMap.set(e[s].type,n[0].outerHTML),console.log("_private.var.rowsTypeMap",o.var.rowsTypeMap)}else o.var.rowsTypeMap.set(e[s].type,e[s].code)}},var:{globalCtx:void 0,globalSettings:void 0,rowsCount:0,rowsTypeMap:{}},const:{rowBaseTmpl:'<div class="row"><div class="col-lg-3 form-group" type="sp_select"></div><div class="col-lg-7 form-group" type="sp_value"></div><div class="col-lg-1 form-group" type="sp_cross"></div><div class="col-lg-1 form-group" type="sp_plus"></div></div>'}}}(jQuery);
